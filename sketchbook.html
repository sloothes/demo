<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="description" contents="Slutty Ladies Observing Outgoing Trying Have Expressive Sex">

    <title>sketchbook demo (v0.1)</title>

    <script>debugMode = true;</script>

</head>

<body>


<script src="/sketchbook/build/three.min.js"></script>
<script src="/sketchbook/build/cannon.min.js"></script> <!-- Only use provided build, official package is extremely outdated! -->
<script src="/sketchbook/build/sketchbook.min.js"></script>

<script>
(function(){

//  Instantiate loaders.
    const fbxLoader = new Sketchbook.FBXLoader();
    const gltfLoader = new Sketchbook.GLTFLoader();

    var world = new Sketchbook.World();

    var player = new Sketchbook.Character({
        position: new THREE.Vector3(1.13, 3, -2.2),
    });

    LoadBoxmanModel(player);

    world.add(player);
    player.takeControl();

    function LoadBoxmanModel(character) {	
        fbxLoader.load('/sketchbook/build/models/game_man/game_man.fbx', function (object) {	
            object.traverse(function (child) {	
                if (child.isMesh) {	
                    child.castShadow = true;	
                    child.receiveShadow = true;	
                }	
                if (child.name == 'game_man') {	
                    child.material = new THREE.MeshLambertMaterial({	
                        map: new THREE.TextureLoader().load('/sketchbook/build/models/game_man/game_man.png'),	
                        skinning: true	
                    });	
                }	
            });	

            console.log(object);

            character.setModel(object);	
            character.setModelOffset(new THREE.Vector3(0, -0.1, 0));	

            // Hide loader, display ui
            document.getElementsByClassName('dg ac')[0].style.display = 'block';
            document.getElementsByClassName('statsBox')[0].style.display = 'block';
            document.getElementById('loader').style.display = 'none';
            document.getElementById('controls-menu').style.display = 'block';
        });	
    }

    function LoadAvatarModel(character){}

})();
</script>

</body>
</html>
